# stages:
#   - build

# build-job:
#   stage: build
#   tags:
#     - GitLabRunner # Asegúrate de que tenga esta etiqueta que es del runner general
#   script:
#     - echo "Creando archivo de prueba..."
#     - echo "Este es un archivo de prueba." > test_file.txt from input
#     - echo "Archivo creado exitosamente. de nuevo  a ver si usa la instancia correcta"
image: alpine:latest
stages:
  - build

deploy_to_remote:
  stage: build
  before_script:
    - uname -a
    - cat /etc/os-release
    - apk add --no‑cache openssh-client sshpass
  tags:
    - GitLabRunner
  script:
    - echo "Desplegando al servidor remoto."
    - sshpass -p "$ODOO_PASSWORD" scp \
        -o StrictHostKeyChecking=no \
        -r ./* \
        "$ODOO_USER@$ODOO_HOST:$DEST_PATH"
  only:
    - main
